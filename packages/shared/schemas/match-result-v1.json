{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://anotherdoctor.com/schemas/match-result-v1.json",
  "title": "Match Result v1",
  "description": "Specialist match result for Another Doctor",
  "type": "object",
  "required": ["doctor_id", "doctor_name", "institution", "total_score", "components", "evidence"],
  "properties": {
    "doctor_id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique doctor identifier"
    },
    "doctor_name": {
      "type": "string",
      "description": "Doctor's full name"
    },
    "institution": {
      "type": "string",
      "description": "Primary institutional affiliation"
    },
    "specialty": {
      "type": "string",
      "description": "Primary medical specialty"
    },
    "total_score": {
      "type": "number",
      "minimum": 0,
      "description": "Total matching score"
    },
    "doctor_score": {
      "type": "number",
      "minimum": 0,
      "description": "Individual doctor score component"
    },
    "institution_score": {
      "type": "number",
      "minimum": 0,
      "description": "Institutional score component"
    },
    "components": {
      "type": "object",
      "required": ["pubs_5y", "trials_pi", "citations_bucket", "inst_pubs", "inst_trials", "nih_grants"],
      "properties": {
        "pubs_5y": {
          "type": "integer",
          "minimum": 0,
          "description": "Publications in last 5 years"
        },
        "trials_pi": {
          "type": "integer",
          "minimum": 0,
          "description": "Clinical trials as principal investigator"
        },
        "citations_bucket": {
          "type": "integer",
          "minimum": 0,
          "maximum": 3,
          "description": "Citation level bucket (0-3)"
        },
        "inst_pubs": {
          "type": "integer",
          "minimum": 0,
          "description": "Institution publications"
        },
        "inst_trials": {
          "type": "integer",
          "minimum": 0,
          "description": "Institution clinical trials"
        },
        "nih_grants": {
          "type": "integer",
          "minimum": 0,
          "description": "NIH grants"
        }
      }
    },
    "evidence": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["type", "title"],
        "properties": {
          "type": {
            "type": "string",
            "enum": ["pubmed", "ctgov", "nih_reporter", "crossref", "openalex"],
            "description": "Evidence source type"
          },
          "title": {
            "type": "string",
            "description": "Work title"
          },
          "year": {
            "type": "integer",
            "minimum": 1900,
            "maximum": 2030,
            "description": "Publication/study year"
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "Reference URL"
          },
          "relevance_score": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "Relevance score (0-1)"
          },
          "pmid": {
            "type": "string",
            "description": "PubMed ID (for pubmed type)"
          },
          "nct_id": {
            "type": "string",
            "pattern": "^NCT[0-9]{8}$",
            "description": "ClinicalTrials.gov ID (for ctgov type)"
          },
          "project_id": {
            "type": "string",
            "description": "Grant project ID (for nih_reporter type)"
          },
          "doi": {
            "type": "string",
            "description": "Digital Object Identifier"
          },
          "role": {
            "type": "string",
            "description": "Doctor's role in the work"
          }
        }
      }
    },
    "explanation": {
      "type": "string",
      "description": "Human-readable explanation of the match"
    },
    "location": {
      "type": "string",
      "description": "Geographic location"
    },
    "years_experience": {
      "type": "integer",
      "minimum": 0,
      "description": "Years of experience"
    },
    "board_certifications": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Board certifications"
    },
    "languages": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Languages spoken"
    },
    "contact_info": {
      "type": "object",
      "description": "Contact information (for approved matches only)",
      "properties": {
        "email": {
          "type": "string",
          "format": "email"
        },
        "phone": {
          "type": "string"
        },
        "office_address": {
          "type": "string"
        }
      }
    }
  }
}